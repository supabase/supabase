---
title: 'Mermaid Diagrams in Blog Posts'
description: A quick example showing how to use Mermaid diagrams in Supabase blog posts.
categories:
  - engineering
tags:
  - postgres
  - documentation
date: '2025-11-27'
toc_depth: 3
author: paul_copplestone
thumb: blog/mermaid-example.jpg
---

This post demonstrates how to use Mermaid diagrams in blog posts.

## Supabase Architecture

Here's the Supabase platform architecture:

```mermaid
flowchart TB
    subgraph Client
        App[Your Application]
    end

    subgraph Gateway
        Kong[Kong API Gateway]
    end

    subgraph Services
        Auth[GoTrue<br/>Auth]
        API[PostgREST<br/>REST API]
        Realtime[Realtime<br/>WebSockets]
        Storage[Storage API<br/>S3-compatible]
        Meta[postgres-meta<br/>DB Management]
        Functions[Deno<br/>Edge Functions]
        GraphQL[pg_graphql<br/>GraphQL]
    end

    subgraph Data
        Postgres[(PostgreSQL)]
        Supavisor[Supavisor<br/>Connection Pooler]
    end

    App --> Kong
    Kong --> Auth
    Kong --> API
    Kong --> Realtime
    Kong --> Storage
    Kong --> Meta
    Kong --> Functions
    Kong --> GraphQL

    Auth --> Supavisor
    API --> Supavisor
    Realtime --> Supavisor
    Storage --> Supavisor
    Meta --> Supavisor
    GraphQL --> Supavisor
    Supavisor --> Postgres
```

## Entity Relationship Diagram

A typical blog database schema:

```mermaid
erDiagram
    USERS ||--o{ POSTS : creates
    USERS ||--o{ COMMENTS : writes
    POSTS ||--o{ COMMENTS : has
    USERS {
        uuid id PK
        string email
        timestamp created_at
    }
    POSTS {
        uuid id PK
        uuid user_id FK
        string title
        text content
    }
    COMMENTS {
        uuid id PK
        uuid user_id FK
        uuid post_id FK
        text content
    }
```

## Sequence Diagrams

### Async Streaming (FDW)

```mermaid
sequenceDiagram
    autonumber
    participant P as Postgres
    participant R as Remote Source
    P->>R: Execute Query
    P->>P: Spawn async task (non-blocking)
    par Async Task
        R->>P:
        Note over R,P: Stream rows incrementally<br/>Send via bounded channel
    end
    P-->P: Read from channel (blocking_recv)
    P-->P: Convert & emit row immediately
```

### Sync Blocking

```mermaid
sequenceDiagram
    autonumber
    participant P as Postgres
    participant R as Remote Source
    P->>R: Execute Query
    R->>P: Wait (blocking)
    Note over R,P: Fetch all rows (or fixed batch)
    P-->P: Buffer all rows in memory
    P-->P: Convert & emit rows in the batch
```

## Usage

Simply use a fenced code block with the `mermaid` language:

````md
```mermaid
graph TD
    A --> B
```
````

Or use the explicit component:

```jsx
<Mermaid
  chart={`
graph TD
    A --> B
`}
/>
```
