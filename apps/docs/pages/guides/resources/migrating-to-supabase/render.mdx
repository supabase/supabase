import Layout from '~/layouts/DefaultGuideLayout'

export const meta = {
  id: 'Render',
  title: 'Migrate from Render to Supabase',
  description: 'Migrate your Render Postgres database to Supabase.',
  sidebar_label: 'Render',
}


Render is a popular Web Hosting service in the online services category that also has a managed Postgres service. Render has a great developer experience, allowing users to deploy straight from GitHub or GitLab. This is the core of their product and they do it really well. However, when it comes to Postgres databases, it may not be the best option.

Supabase is a top-notch, free alternative to Render Postgres. We provide all the backend features developers need to build a product: a Postgres database, authentication, instant APIs, edge functions, realtime subscriptions, and storage. Postgres is the core of Supabase, for example, you can use row-level security and we have more than 40 Postgres extensions available.

In this guide, we'll show you how to migrate from Render to Supabase to get the most out of Postgres while gaining access to all the features you need to build a project.

You will need to use the [pg_dump](https://www.postgresql.org/docs/current/app-pgdump.html) and [psql](https://www.postgresql.org/docs/current/app-psql.html) command line tools, which come included in a full PostgreSQL installation.

If you prefer a quicker option, try the Supabase migration tool on [Google Colab](https://colab.research.google.com/github/mansueli/Supa-Migrate/blob/main/Migrate_Postgres_Supabase.ipynb) for a simple, few-click migration.

## Retrieve your Render database credentials [#retrieve-render-credentials]

1. Log in to your [Render account](https://render.com) and select the project you want to migrate.
1. Click **Dashboard** in the menu and click in your **Postgres** database.
1. Scroll down in the **Info** tab.
1. Click on **PSQL Command** and edit it adding the content after `PSQL_COMMAND=`.

![Copying PSQL command from Render dashboard](/docs/img/guides/resources/migrating-to-supabase/render/render_dashboard.png)
Example:

```bash
%env PSQL_COMMAND=PGPASSWORD=RgaMDfTS_password_FTPa7 psql -h dpg-a_server_in.oregon-postgres.render.com -U my_db_pxl0_user my_db_pxl0
```

## Retrieve your Supabase Host [#retrieve-supabase-host]

1. If you're new to Supabase, [create a project](https://app.supabase.com).
1. Go to the [Database settings](https://app.supabase.com/project/_/settings/database) for your project in the Supabase Dashboard.
1. Under **Connection Info**, note your Host (`$SUPABASE_HOST`).
1. Save your password or [reset it](https://app.supabase.com/project/_/settings/database) if you forgot it.

![Finding Supabase host address](/docs/img/guides/resources/migrating-to-supabase/render/supabase_dashboard.png)

## Run the migration in Colab [#run-migration]

1. Set the environment variables (`PSQL_COMMAND`, `SUPABASE_HOST`, `SUPABASE_PASSWORD`) in the Colab notebook.
1. Run the first two steps in [the notebook](https://colab.research.google.com/github/mansueli/Supa-Migrate/blob/main/Migrate_Postgres_Supabase.ipynb) in order. The first sets the variables and the second installs PSQL and the migration script.
1. Run the third step to start the migration. This will take a few minutes.

## Export your Render database to a file in console [#export-render-database]

Use `pg_dump` with your Render credentials to export your Render database to a file (e.g., `render_dump.sql`).

```bash
pg_dump --clean --if-exists --quote-all-identifiers \
 -h $RENDER_HOST -U $RENDER_USER -d $RENDER_DATABASE \
 --no-owner --no-privileges > render_dump.sql
```

## Import the database to your Supabase project [#import-database-to-supabase]

Use `psql` to import the Render database file to your Supabase project.

```bash
psql -h $SUPA_URL -U postgres --file render_dump.sql -p 6543 -d postgres
```

## Additional options

- To only migrate a single database schema, add the `--schema=PATTERN` parameter to your `pg_dump` command.
- To exclude a schema: `--exclude-schema=PATTERN`.
- To only migrate a single table: `--table=PATTERN`.
- To exclude a table: `--exclude-table=PATTERN`.

Run `pg_dump --help` for a full list of options.

export const Page = ({ children }) => <Layout meta={meta} children={children} />

export default Page
