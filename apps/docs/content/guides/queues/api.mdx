---
title: Supabase Queues API
---

When you create a queue in Supabase, it creates both a private and public pgmq schema. The pgmq_public schema exposes common queue maintenance operations to clients, but does not expose functions for creating or dropping queues. Exposed functions are automatically available via PostgREST, and can be called with the supabase.rpc method.

See the [Quickstart](/docs/guides/queues/quickstart) for an example.

The full list of available Queue functions is:

## API Reference

### `pop(queue_name)`

Retrieves and locks the next message from the specified queue.

- `queue_name` (string): Name of the queue to pop from

---

### `send(queue_name, message, sleep_seconds?)`

Sends a message to the specified queue, optionally delaying its availability by a number of seconds.

- `queue_name` (string): Name of the queue to send to
- `message` (json): Message payload to send
- `sleep_seconds` (integer, optional): Delay message visibility by specified seconds

---

### `send_batch(queue_name, messages, sleep_seconds?)`

Sends a batch of messages to the specified queue, optionally delaying their availability by a number of seconds.

- `queue_name` (string): Name of the queue to send to
- `messages` (json[]): Array of message payloads to send
- `sleep_seconds` (integer, optional): Delay messages visibility by specified seconds

---

### `archive(queue_name, message_id)`

Archives a message by moving it from the queue to a permanent archive.

- `queue_name` (string): Name of the queue
- `message_id` (bigint): ID of the message to archive

---

### `delete(queue_name, message_id)`

Permanently deletes a message from the specified queue.

- `queue_name` (string): Name of the queue
- `message_id` (bigint): ID of the message to delete

---

### `read(queue_name, sleep_seconds, n)`

Reads up to "n" messages from the specified queue with an optional "sleep_seconds" (visibility timeout).

- `queue_name` (string): Name of the queue to read from
- `sleep_seconds` (integer): Visibility timeout in seconds
- `n` (integer): Maximum number of messages to read
