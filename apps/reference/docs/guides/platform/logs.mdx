---
id: logs
title: Logging
description: Getting started with Supabase Platform Log Browser
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

The Supabase Platform includes a Logs Explorer that allows log tracing and debugging. Log retention is based on your [project's pricing plan](https://supabase.com/pricing).

:::note
These features are currently not available for self-hosted and local development.<br/>
This is currently on the roadmap and you can follow the progress in the [Logflare repository](https://github.com/Logflare/logflare).
:::


## Product Logs

Supabase provides a logging interface specific to each product. Simple regex searching is available through the search bar to search the log event messsage for specific keywords and patterns. You may export and download the log events matching your query as a spreadsheet.

<!-- 
To update the screenshots, ensure that at least one log line is selected to display the metadata. Can use meme.town as an example.
-->

<Tabs>
  <TabItem value="api" label="API" default>

[API logs](https://app.supabase.com/project/_/database/api-logs) show all network requests and response for the REST and GraphQL [APIs](../../guides/api).

![API Logs](/img/guides/platform/logs/logs-api.png)

  </TabItem>
  <TabItem value="postgres" label="Postgres">

[Postgres logs](https://app.supabase.com/project/_/database/postgres-logs) show all queries and activity for your [database](../../guides/database).

![Postgres Logs](/img/guides/platform/logs/logs-database.png)

  </TabItem>
  <TabItem value="auth" label="Auth">

[Auth logs](https://app.supabase.com/project/_/auth/logs) show all server logs for your [Auth uage](../../guides/auth).

![Auth Logs](/img/guides/platform/logs/logs-auth.png)

  </TabItem>
  <TabItem value="storage" label="Storage">

[Storage logs](https://app.supabase.com/project/_/storage/logs) shows all server logs for your [Storage API](../../guides/storage).

![Storage Logs](/img/guides/platform/logs/logs-storage.png)

  </TabItem>
  <TabItem value="realtime" label="Realtime">

[Realtime logs](https://app.supabase.com/project/_/database/realtime-logs) show all server logs for your [Realtime API usage](../../guides/realtime).

![Realtime Logs](/img/guides/platform/logs/logs-realtime.png)

  </TabItem>
  <TabItem value="functions" label="Edge Functions">

For each [Edge Function](https://app.supabase.com/project/_/functions), logs are available under the following tabs:

**Invocations**

The Invocations tab displays the edge logs of function calls.

![Function Edge Logs](/img/guides/platform/logs/logs-functions-edge.png)

**Logs**

The Logs tab displays logs emitted during function execution.

![Function Logs](/img/guides/platform/logs/logs-functions.png)

  </TabItem>
</Tabs>

## Logs Explorer

The [Logs Explorer](https://app.supabase.com/project/_/logs-explorer) exposes logs from each part of the Supabase stack as a separate table that can be queried and joined using SQL.

![Logs Explorer](/img/guides/platform/logs/logs-explorer.png)

You can access the following logs from the **Sources** drop-down:
- `auth_logs`: GoTrue server logs, containing authentication/authorization activity.
- `edge_logs`: Edge network logs, containing request and response metadata retrieved from Cloudflare.
- `function_edge_logs`: Edge network logs for only edge functions, containing network requests and response metadata for each execution.
- `function_logs`: Function internal logs, containing any `console` logging from within the edge function.
- `postgres_logs`: Postgres database logs, containing statements executed by connected applications.
- `realtime_logs`: Realtime server logs, containing client connection information.
- `storage_logs`: Storage server logs, containing object upload and retrieval information.


## Querying with the Logs Explorer

The Logs Explorer uses BigQuery and supports all [available SQL functions and operators](https://cloud.google.com/bigquery/docs/reference/standard-sql/functions-and-operators).


### Timestamp Display and Behavior

Each log entry is stored with a `timestamp` as a `TIMESTAMP` data type. Use the appropriate [timestamp function](https://cloud.google.com/bigquery/docs/reference/standard-sql/timestamp_functions#timestamp) to utilize the `timestamp` field in a query.

Raw top-level timestamp values are rendered as unix microsecond. To render the timestamps in a human-readable format, use the `DATETIME()` function to convert the unix timestamp display into an ISO-8601 timestamp.

```sql
-- timestamp column without datetime()
select timestamp from ....
--  1664270180000 

-- timestamp column with datetime()
select datetime(timestamp) from ....
-- 2022-09-27T09:17:10.439Z
```

:::info
The rendering behaviour as unix microsecond will be removed in the future.
:::

### Unnesting Arrays

To query nested data within a log event, unnest the field and "join" the unnested data. Clicking on the log row shows that log metadata is stored as an array of objects.

To query any value that is an array, we would need to `unnest()` that field and add it to the query as a join, allowing us to reference the nested fields within the array.

For example, to query the edge logs without any joins:

```sql
select timestamp, metadata from edge_logs t
```
The resulting `metadata` key is rendered as an array of objects when rendered in the Logs Explorer. This can be better visualized in this diagram, where each square in a column represents a nested object: 

![Without Unnesting](/img/guides/platform/logs/unnesting-none.png)


To drill down further, we can add in a `cross join unnest()` so that we can work with keys nested below the `metadata` key. 

To query for a deeply nested value, we will have to add join for each level:


```sql
select timestamp, request.method, header.cf_ipcountry
from edge_logs t
cross join UNNEST(t.metadata) as metadata
cross join UNNEST(metadata.request) as request
cross join UNNEST(request.headers) as header
```

Doing so surfaces the following columns available for selection:

![With Two Level Unnesting](/img/guides/platform/logs/unnesting-2.png)

This then allows us to select the `method` and `cf_ipcountry` columns. In JS dot notation, the full paths for each selected column are:
- `metadata.[].request.[].method`
- `metadata.[].request.[].headers.[].cf_ipcountry` 


### LIMIT and Result Row Limitations

The Logs Explorer has a maximum of 1000 rows per run. To optimize your queries, you can add a `LIMIT` to your SQL query, to reduce the number of rows returned even further.

### Best Practices

1. Include a WHERE statement filtering over **timestamp**

  Querying across your entire log retention range might seem appealing, especially when you need to get your query results fast. For **Enterprise** customers that have a large retention range, you run the risk of your queries timing out due additional time required to scan the larger dataset.

2. Avoid selecting large nested objects. Select individual values instead.

  When querying large objects, the columnar storage engine (in this case BigQuery) selects each column associated with each nested key, resulting in a large number of columns being selected. This inadvertently impacts the query speed and may result in timeouts or memory errors, especially for projects with large amounts of logging activity. 

  Instead, select only the values required.

  ```sql
  -- ❌ Avoid doing this
  select 
    datetime(timestamp), 
    m as metadata  -- <- metadata contains many nested keys
  from edge_logs t
  cross join unnest(t.metadata) as m;
  
  -- ✅ Do this
  select 
  datetime(timestamp), 
  r.method   -- <- select only the required values
  from edge_logs t
  cross join unnest(t.metadata) as m
  cross join unnest(m.request) as r
  ```

### Examples and Templates

The Logs Explorer includes **Templates** (available in the Templates tab or the dropdown in the Query tab) to help you get started.

For example, you can enter the following query in the SQL Editor to retrieve each user's IP address:

```sql
select datetime(timestamp), h.x_real_ip
from edge_logs
  cross join unnest(metadata) as m
  cross join unnest(m.request) AS r
  cross join unnest(r.headers) AS h
where h.x_real_ip is not null and r.method = "GET"
```